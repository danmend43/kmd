"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("middleware",{

/***/ "(middleware)/./middleware.ts":
/*!***********************!*\
  !*** ./middleware.ts ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   middleware: () => (/* binding */ middleware)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(middleware)/./node_modules/next/dist/esm/api/server.js\");\n\nfunction middleware(request) {\n    const { pathname } = request.nextUrl;\n    // Permitir acesso público à rota de login\n    if (pathname === \"/login\") {\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.next();\n    }\n    // Permitir acesso público às rotas de catálogo (páginas)\n    if (pathname.startsWith(\"/catalog\")) {\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.next();\n    }\n    // Permitir acesso público aos arquivos HTML estáticos de catálogos\n    if (pathname.startsWith(\"/catalogs/\") && pathname.endsWith(\".html\")) {\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.next();\n    }\n    // Permitir rotas de autenticação (login, verify, logout) - todos os métodos\n    if (pathname.startsWith(\"/api/auth\")) {\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.next();\n    }\n    // Permitir OPTIONS requests (CORS preflight)\n    if (request.method === \"OPTIONS\") {\n        return new next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse(null, {\n            status: 200,\n            headers: {\n                \"Access-Control-Allow-Origin\": \"*\",\n                \"Access-Control-Allow-Methods\": \"GET, POST, PUT, DELETE, OPTIONS\",\n                \"Access-Control-Allow-Headers\": \"Content-Type, Authorization\"\n            }\n        });\n    }\n    // Permitir acesso público ao GET de catalog-config (API usada pela página pública)\n    if (pathname === \"/api/catalog-config\" && request.method === \"GET\") {\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.next();\n    }\n    // Permitir acesso público ao GET de accounts (usado pela página de catálogo)\n    if (pathname === \"/api/accounts\" && request.method === \"GET\") {\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.next();\n    }\n    // Permitir acesso público ao GET de load-last-history (usado pela página de catálogo)\n    if (pathname === \"/api/load-last-history\" && request.method === \"GET\") {\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.next();\n    }\n    // Verificar se o usuário está autenticado (verificação simples)\n    const authToken = request.cookies.get(\"auth-token\");\n    const isAuthenticated = authToken && authToken.value === \"authenticated\";\n    // Para rotas de API, deixar que cada rota verifique individualmente\n    // (elas retornarão JSON de erro ao invés de redirecionar)\n    if (pathname.startsWith(\"/api/\")) {\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.next();\n    }\n    // Para páginas, redirecionar para login se não autenticado\n    if (!isAuthenticated) {\n        const loginUrl = new URL(\"/login\", request.url);\n        loginUrl.searchParams.set(\"redirect\", pathname);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.redirect(loginUrl);\n    }\n    return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.next();\n}\nconst config = {\n    matcher: [\n        /*\n     * Match all request paths except for the ones starting with:\n     * - _next/static (static files)\n     * - _next/image (image optimization files)\n     * - favicon.ico (favicon file)\n     * - public folder (arquivos estáticos)\n     */ \"/((?!_next/static|_next/image|favicon.ico|.*\\\\.(?:svg|png|jpg|jpeg|gif|webp)$).*)\"\n    ]\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKG1pZGRsZXdhcmUpLy4vbWlkZGxld2FyZS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBMEM7QUFHbkMsU0FBU0MsV0FBV0MsT0FBb0I7SUFDN0MsTUFBTSxFQUFFQyxRQUFRLEVBQUUsR0FBR0QsUUFBUUUsT0FBTztJQUVwQywwQ0FBMEM7SUFDMUMsSUFBSUQsYUFBYSxVQUFVO1FBQ3pCLE9BQU9ILHFEQUFZQSxDQUFDSyxJQUFJO0lBQzFCO0lBRUEseURBQXlEO0lBQ3pELElBQUlGLFNBQVNHLFVBQVUsQ0FBQyxhQUFhO1FBQ25DLE9BQU9OLHFEQUFZQSxDQUFDSyxJQUFJO0lBQzFCO0lBRUEsbUVBQW1FO0lBQ25FLElBQUlGLFNBQVNHLFVBQVUsQ0FBQyxpQkFBaUJILFNBQVNJLFFBQVEsQ0FBQyxVQUFVO1FBQ25FLE9BQU9QLHFEQUFZQSxDQUFDSyxJQUFJO0lBQzFCO0lBRUEsNEVBQTRFO0lBQzVFLElBQUlGLFNBQVNHLFVBQVUsQ0FBQyxjQUFjO1FBQ3BDLE9BQU9OLHFEQUFZQSxDQUFDSyxJQUFJO0lBQzFCO0lBRUEsNkNBQTZDO0lBQzdDLElBQUlILFFBQVFNLE1BQU0sS0FBSyxXQUFXO1FBQ2hDLE9BQU8sSUFBSVIscURBQVlBLENBQUMsTUFBTTtZQUM1QlMsUUFBUTtZQUNSQyxTQUFTO2dCQUNQLCtCQUErQjtnQkFDL0IsZ0NBQWdDO2dCQUNoQyxnQ0FBZ0M7WUFDbEM7UUFDRjtJQUNGO0lBRUEsbUZBQW1GO0lBQ25GLElBQUlQLGFBQWEseUJBQXlCRCxRQUFRTSxNQUFNLEtBQUssT0FBTztRQUNsRSxPQUFPUixxREFBWUEsQ0FBQ0ssSUFBSTtJQUMxQjtJQUVBLDZFQUE2RTtJQUM3RSxJQUFJRixhQUFhLG1CQUFtQkQsUUFBUU0sTUFBTSxLQUFLLE9BQU87UUFDNUQsT0FBT1IscURBQVlBLENBQUNLLElBQUk7SUFDMUI7SUFFQSxzRkFBc0Y7SUFDdEYsSUFBSUYsYUFBYSw0QkFBNEJELFFBQVFNLE1BQU0sS0FBSyxPQUFPO1FBQ3JFLE9BQU9SLHFEQUFZQSxDQUFDSyxJQUFJO0lBQzFCO0lBRUEsZ0VBQWdFO0lBQ2hFLE1BQU1NLFlBQVlULFFBQVFVLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDO0lBQ3RDLE1BQU1DLGtCQUFrQkgsYUFBYUEsVUFBVUksS0FBSyxLQUFLO0lBRXpELG9FQUFvRTtJQUNwRSwwREFBMEQ7SUFDMUQsSUFBSVosU0FBU0csVUFBVSxDQUFDLFVBQVU7UUFDaEMsT0FBT04scURBQVlBLENBQUNLLElBQUk7SUFDMUI7SUFFQSwyREFBMkQ7SUFDM0QsSUFBSSxDQUFDUyxpQkFBaUI7UUFDcEIsTUFBTUUsV0FBVyxJQUFJQyxJQUFJLFVBQVVmLFFBQVFnQixHQUFHO1FBQzlDRixTQUFTRyxZQUFZLENBQUNDLEdBQUcsQ0FBQyxZQUFZakI7UUFDdEMsT0FBT0gscURBQVlBLENBQUNxQixRQUFRLENBQUNMO0lBQy9CO0lBRUEsT0FBT2hCLHFEQUFZQSxDQUFDSyxJQUFJO0FBQzFCO0FBRU8sTUFBTWlCLFNBQVM7SUFDcEJDLFNBQVM7UUFDUDs7Ozs7O0tBTUMsR0FDRDtLQUNEO0FBQ0gsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi9taWRkbGV3YXJlLnRzPzQyMmQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dFJlc3BvbnNlIH0gZnJvbSAnbmV4dC9zZXJ2ZXInXG5pbXBvcnQgdHlwZSB7IE5leHRSZXF1ZXN0IH0gZnJvbSAnbmV4dC9zZXJ2ZXInXG5cbmV4cG9ydCBmdW5jdGlvbiBtaWRkbGV3YXJlKHJlcXVlc3Q6IE5leHRSZXF1ZXN0KSB7XG4gIGNvbnN0IHsgcGF0aG5hbWUgfSA9IHJlcXVlc3QubmV4dFVybFxuXG4gIC8vIFBlcm1pdGlyIGFjZXNzbyBww7pibGljbyDDoCByb3RhIGRlIGxvZ2luXG4gIGlmIChwYXRobmFtZSA9PT0gJy9sb2dpbicpIHtcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLm5leHQoKVxuICB9XG5cbiAgLy8gUGVybWl0aXIgYWNlc3NvIHDDumJsaWNvIMOgcyByb3RhcyBkZSBjYXTDoWxvZ28gKHDDoWdpbmFzKVxuICBpZiAocGF0aG5hbWUuc3RhcnRzV2l0aCgnL2NhdGFsb2cnKSkge1xuICAgIHJldHVybiBOZXh0UmVzcG9uc2UubmV4dCgpXG4gIH1cblxuICAvLyBQZXJtaXRpciBhY2Vzc28gcMO6YmxpY28gYW9zIGFycXVpdm9zIEhUTUwgZXN0w6F0aWNvcyBkZSBjYXTDoWxvZ29zXG4gIGlmIChwYXRobmFtZS5zdGFydHNXaXRoKCcvY2F0YWxvZ3MvJykgJiYgcGF0aG5hbWUuZW5kc1dpdGgoJy5odG1sJykpIHtcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLm5leHQoKVxuICB9XG5cbiAgLy8gUGVybWl0aXIgcm90YXMgZGUgYXV0ZW50aWNhw6fDo28gKGxvZ2luLCB2ZXJpZnksIGxvZ291dCkgLSB0b2RvcyBvcyBtw6l0b2Rvc1xuICBpZiAocGF0aG5hbWUuc3RhcnRzV2l0aCgnL2FwaS9hdXRoJykpIHtcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLm5leHQoKVxuICB9XG4gIFxuICAvLyBQZXJtaXRpciBPUFRJT05TIHJlcXVlc3RzIChDT1JTIHByZWZsaWdodClcbiAgaWYgKHJlcXVlc3QubWV0aG9kID09PSAnT1BUSU9OUycpIHtcbiAgICByZXR1cm4gbmV3IE5leHRSZXNwb25zZShudWxsLCB7XG4gICAgICBzdGF0dXM6IDIwMCxcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgJ0FjY2Vzcy1Db250cm9sLUFsbG93LU9yaWdpbic6ICcqJyxcbiAgICAgICAgJ0FjY2Vzcy1Db250cm9sLUFsbG93LU1ldGhvZHMnOiAnR0VULCBQT1NULCBQVVQsIERFTEVURSwgT1BUSU9OUycsXG4gICAgICAgICdBY2Nlc3MtQ29udHJvbC1BbGxvdy1IZWFkZXJzJzogJ0NvbnRlbnQtVHlwZSwgQXV0aG9yaXphdGlvbicsXG4gICAgICB9LFxuICAgIH0pXG4gIH1cblxuICAvLyBQZXJtaXRpciBhY2Vzc28gcMO6YmxpY28gYW8gR0VUIGRlIGNhdGFsb2ctY29uZmlnIChBUEkgdXNhZGEgcGVsYSBww6FnaW5hIHDDumJsaWNhKVxuICBpZiAocGF0aG5hbWUgPT09ICcvYXBpL2NhdGFsb2ctY29uZmlnJyAmJiByZXF1ZXN0Lm1ldGhvZCA9PT0gJ0dFVCcpIHtcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLm5leHQoKVxuICB9XG5cbiAgLy8gUGVybWl0aXIgYWNlc3NvIHDDumJsaWNvIGFvIEdFVCBkZSBhY2NvdW50cyAodXNhZG8gcGVsYSBww6FnaW5hIGRlIGNhdMOhbG9nbylcbiAgaWYgKHBhdGhuYW1lID09PSAnL2FwaS9hY2NvdW50cycgJiYgcmVxdWVzdC5tZXRob2QgPT09ICdHRVQnKSB7XG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5uZXh0KClcbiAgfVxuXG4gIC8vIFBlcm1pdGlyIGFjZXNzbyBww7pibGljbyBhbyBHRVQgZGUgbG9hZC1sYXN0LWhpc3RvcnkgKHVzYWRvIHBlbGEgcMOhZ2luYSBkZSBjYXTDoWxvZ28pXG4gIGlmIChwYXRobmFtZSA9PT0gJy9hcGkvbG9hZC1sYXN0LWhpc3RvcnknICYmIHJlcXVlc3QubWV0aG9kID09PSAnR0VUJykge1xuICAgIHJldHVybiBOZXh0UmVzcG9uc2UubmV4dCgpXG4gIH1cblxuICAvLyBWZXJpZmljYXIgc2UgbyB1c3XDoXJpbyBlc3TDoSBhdXRlbnRpY2FkbyAodmVyaWZpY2HDp8OjbyBzaW1wbGVzKVxuICBjb25zdCBhdXRoVG9rZW4gPSByZXF1ZXN0LmNvb2tpZXMuZ2V0KCdhdXRoLXRva2VuJylcbiAgY29uc3QgaXNBdXRoZW50aWNhdGVkID0gYXV0aFRva2VuICYmIGF1dGhUb2tlbi52YWx1ZSA9PT0gJ2F1dGhlbnRpY2F0ZWQnXG5cbiAgLy8gUGFyYSByb3RhcyBkZSBBUEksIGRlaXhhciBxdWUgY2FkYSByb3RhIHZlcmlmaXF1ZSBpbmRpdmlkdWFsbWVudGVcbiAgLy8gKGVsYXMgcmV0b3JuYXLDo28gSlNPTiBkZSBlcnJvIGFvIGludsOpcyBkZSByZWRpcmVjaW9uYXIpXG4gIGlmIChwYXRobmFtZS5zdGFydHNXaXRoKCcvYXBpLycpKSB7XG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5uZXh0KClcbiAgfVxuXG4gIC8vIFBhcmEgcMOhZ2luYXMsIHJlZGlyZWNpb25hciBwYXJhIGxvZ2luIHNlIG7Do28gYXV0ZW50aWNhZG9cbiAgaWYgKCFpc0F1dGhlbnRpY2F0ZWQpIHtcbiAgICBjb25zdCBsb2dpblVybCA9IG5ldyBVUkwoJy9sb2dpbicsIHJlcXVlc3QudXJsKVxuICAgIGxvZ2luVXJsLnNlYXJjaFBhcmFtcy5zZXQoJ3JlZGlyZWN0JywgcGF0aG5hbWUpXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5yZWRpcmVjdChsb2dpblVybClcbiAgfVxuXG4gIHJldHVybiBOZXh0UmVzcG9uc2UubmV4dCgpXG59XG5cbmV4cG9ydCBjb25zdCBjb25maWcgPSB7XG4gIG1hdGNoZXI6IFtcbiAgICAvKlxuICAgICAqIE1hdGNoIGFsbCByZXF1ZXN0IHBhdGhzIGV4Y2VwdCBmb3IgdGhlIG9uZXMgc3RhcnRpbmcgd2l0aDpcbiAgICAgKiAtIF9uZXh0L3N0YXRpYyAoc3RhdGljIGZpbGVzKVxuICAgICAqIC0gX25leHQvaW1hZ2UgKGltYWdlIG9wdGltaXphdGlvbiBmaWxlcylcbiAgICAgKiAtIGZhdmljb24uaWNvIChmYXZpY29uIGZpbGUpXG4gICAgICogLSBwdWJsaWMgZm9sZGVyIChhcnF1aXZvcyBlc3TDoXRpY29zKVxuICAgICAqL1xuICAgICcvKCg/IV9uZXh0L3N0YXRpY3xfbmV4dC9pbWFnZXxmYXZpY29uLmljb3wuKlxcXFwuKD86c3ZnfHBuZ3xqcGd8anBlZ3xnaWZ8d2VicCkkKS4qKScsXG4gIF0sXG59XG4iXSwibmFtZXMiOlsiTmV4dFJlc3BvbnNlIiwibWlkZGxld2FyZSIsInJlcXVlc3QiLCJwYXRobmFtZSIsIm5leHRVcmwiLCJuZXh0Iiwic3RhcnRzV2l0aCIsImVuZHNXaXRoIiwibWV0aG9kIiwic3RhdHVzIiwiaGVhZGVycyIsImF1dGhUb2tlbiIsImNvb2tpZXMiLCJnZXQiLCJpc0F1dGhlbnRpY2F0ZWQiLCJ2YWx1ZSIsImxvZ2luVXJsIiwiVVJMIiwidXJsIiwic2VhcmNoUGFyYW1zIiwic2V0IiwicmVkaXJlY3QiLCJjb25maWciLCJtYXRjaGVyIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(middleware)/./middleware.ts\n");

/***/ })

});